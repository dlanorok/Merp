<fieldset>
    <legend>Prices by VAT</legend>

    <MudGrid>
        <MudItem xs="5" md="5">
            <MudText>Taxable amount</MudText>
        </MudItem>
        <MudItem xs="3" md="3">
            <MudText>VAT</MudText>
        </MudItem>
        <MudItem xs="4" md="4">
            <MudText>Tot. price</MudText>
        </MudItem>
    </MudGrid>
    <MudDivider />

    @foreach (var item in PricesByVat)
    {
        <MudGrid>
            <MudItem xs="3" md="3">
                <MudNumericField Label="Tax. amount"
                                 @bind-Value="item.TaxableAmount"
                                 For="@(() => item.TaxableAmount)"
                                 Variant="Variant.Outlined"
                                 Step=".01M" 
                                 Min="0"
                                 Format="N2"
                                 Margin="Margin.Dense"/>
            </MudItem>
            <MudItem xs="2" md="2" Class="d-flex align-center">
                <MudText>@item.VatRate %</MudText>
            </MudItem>
            <MudItem xs="3" md="3">
                <MudNumericField Label="VAT"
                                 Value="item.VatAmount"
                                 ValueChanged="@((decimal value) => OnVatAmountChange(value, item))"
                                 For="@(() => item.VatAmount)"
                                 Variant="Variant.Outlined"
                                 Step=".01M" 
                                 Min="0"
                                 Format="N2"
                                 Margin="Margin.Dense"/>
            </MudItem>
            <MudItem xs="4" md="4">
                <MudNumericField Label="Tot. price"
                                 Value="item.TotalPrice"
                                 ValueChanged="@((decimal value) => OnTotalPriceChange(value, item))"
                                 For="@(() => item.TotalPrice)"
                                 Variant="Variant.Outlined"
                                 Step=".01M" 
                                 Min="0"
                                 Format="N2"
                                 Margin="Margin.Dense"/>
            </MudItem>
        </MudGrid>
    }
</fieldset>
