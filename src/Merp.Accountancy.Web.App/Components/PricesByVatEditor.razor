@inject IStringLocalizer<Resources.Components.PricesByVatEditor> localizer

<fieldset>
    <legend>@localizer[nameof(Resources.Components.PricesByVatEditor.PricesByVatSectionTitle)]</legend>

    <MudGrid>
        <MudItem xs="5" md="5">
            <MudText>@localizer[nameof(Resources.Components.PricesByVatEditor.PriceByVatTaxableAmountLabel)]</MudText>
        </MudItem>
        <MudItem xs="3" md="3">
            <MudText>@localizer[nameof(Resources.Components.PricesByVatEditor.PriceByVatVatLabel)]</MudText>
        </MudItem>
        <MudItem xs="4" md="4">
            <MudText>@localizer[nameof(Resources.Components.PricesByVatEditor.PriceByVatTotalPriceLabel)]</MudText>
        </MudItem>
    </MudGrid>
    <MudDivider />

    @foreach (var item in PricesByVat)
    {
        <MudGrid>
            <MudItem xs="3" md="3">
                <MudNumericField Label="@localizer[nameof(Resources.Components.PricesByVatEditor.PriceByVatTaxableAmountLabel)]"
                                 @bind-Value="item.TaxableAmount"
                                 For="@(() => item.TaxableAmount)"
                                 Variant="Variant.Outlined"
                                 Step=".01M" 
                                 Min="0"
                                 Format="N2"
                                 Margin="Margin.Dense"/>
            </MudItem>
            <MudItem xs="2" md="2" Class="d-flex align-center">
                <MudText>@item.VatRate %</MudText>
            </MudItem>
            <MudItem xs="3" md="3">
                <MudNumericField Label="@localizer[nameof(Resources.Components.PricesByVatEditor.PriceByVatVatLabel)]"
                                 Value="item.VatAmount"
                                 ValueChanged="@((decimal value) => OnVatAmountChange(value, item))"
                                 For="@(() => item.VatAmount)"
                                 Variant="Variant.Outlined"
                                 Step=".01M" 
                                 Min="0"
                                 Format="N2"
                                 Margin="Margin.Dense"/>
            </MudItem>
            <MudItem xs="4" md="4">
                <MudNumericField Label="@localizer[nameof(Resources.Components.PricesByVatEditor.PriceByVatTotalPriceLabel)]"
                                 Value="item.TotalPrice"
                                 ValueChanged="@((decimal value) => OnTotalPriceChange(value, item))"
                                 For="@(() => item.TotalPrice)"
                                 Variant="Variant.Outlined"
                                 Step=".01M" 
                                 Min="0"
                                 Format="N2"
                                 Margin="Margin.Dense"/>
            </MudItem>
        </MudGrid>
    }
</fieldset>
